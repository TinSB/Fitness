import React, { useState, useMemo, useRef, useEffect } from 'react';
import { 
  Dumbbell, Activity, ChevronRight, Info, Flame, Calculator, X, 
  CheckCircle, AlertTriangle, ChevronDown, Sparkles, Loader2, Send, 
  Filter, MonitorSmartphone, BookOpen 
} from 'lucide-react';

// --- 0. Gemini API Configuration ---
const apiKey = ""; // ç³»ç»Ÿä¼šè‡ªåŠ¨æ³¨å…¥ API Key

const callGemini = async (prompt) => {
  try {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
      {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
        }),
      }
    );

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const data = await response.json();
    return data.candidates[0].content.parts[0].text;
  } catch (error) {
    console.error("Gemini API Error:", error);
    return "æŠ±æ­‰ï¼ŒAI æ•™ç»ƒç°åœ¨æœ‰ç‚¹å¿™ï¼Œè¯·ç¨åå†è¯•ã€‚";
  }
};

// --- 1. æ‰©å±•åçš„æ•°æ®åº“ (Extended Domain Data) ---
// æ•°æ®æ¥æºå‚è€ƒï¼šGymGuide Pro ä»£ç åº“ & ä¸“ä¸šå¥èº«æ–‡æ¡£
const EXERCISE_DATA = [
  // === è…¿éƒ¨ Legs ===
  {
    id: 'leg_press',
    name: 'åå§¿æ¨è…¿ (Leg Press)',
    category: 'è…¿éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['è‚¡å››å¤´è‚Œ', 'è‡€å¤§è‚Œ', 'è…˜ç»³è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'é€šè¿‡æ¨è¹¬è¸æ¿è®­ç»ƒä¸‹è‚¢åŠ›é‡ï¼Œå›ºå®šè½¨è¿¹å¯¹è…°èƒŒå‹å¥½ï¼Œæ˜¯å¤§éƒ¨åˆ†æ–°æ‰‹è¸å…¥è…¿éƒ¨è®­ç»ƒçš„å®‰å…¨èµ·ç‚¹ã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…ï¼Œä½¿è†ç›–åœ¨èµ·å§‹ä½ç½®çº¦å¼¯æ›² 90Â°ï¼ŒèƒŒéƒ¨å®Œå…¨è´´ç´§é å«ã€‚',
      'åŒè„šä¸è‚©åŒå®½æ”¾åœ¨è¸æ¿ä¸Šï¼Œè„šå°–ç•¥å¾®å¤–å±•ï¼Œè„šè·Ÿè¸©å®ã€‚',
      'å¸æ°”ç¼“æ…¢å¼¯æ›²è†ç›–è®©è¸æ¿ä¸‹é™ï¼Œé¿å…é‡é‡å®Œå…¨è½åˆ°åº•é€ æˆå†²å‡»ã€‚',
      'å‘¼æ°”ç”¨è„šè·Ÿå‘åŠ›æ¨èµ·è¸æ¿ï¼Œé¡¶ç«¯è†ç›–ä¿ç•™è½»å¾®å¼¯æ›²ï¼Œä¸è¦é”æ­»ã€‚'
    ],
    tips: [
      'å…¨ç¨‹ä¿æŒä¸‹èƒŒè´´é å«ï¼Œé¿å…è…°éƒ¨æ‹±èµ·å¯¼è‡´è…°æ¤å—å‹ã€‚',
      'è†ç›–ä¸è„šå°–æ–¹å‘ä¿æŒä¸€è‡´ï¼Œé¿å…æ˜æ˜¾å†…æ‰£æˆ–å¤–ç¿»ã€‚',
      'èŠ‚å¥å»ºè®®ï¼šä¸‹æ”¾çº¦ 2 ç§’ï¼Œæ¨èµ·çº¦ 1 ç§’ï¼Œç¦æ­¢å¼¹éœ‡å’ŒçŒ›è¹¬ã€‚'
    ]
  },
  {
    id: 'leg_extension',
    name: 'åå§¿è…¿å±ˆä¼¸',
    category: 'è…¿éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['è‚¡å››å¤´è‚Œ (å¤§è…¿å‰ä¾§)'],
    difficulty: 'ç®€å•',
    description: 'å­¤ç«‹åˆºæ¿€å¤§è…¿å‰ä¾§ï¼Œå¯ä½œä¸ºè…¿ä¸¾æˆ–æ·±è¹²åé’ˆå¯¹æ€§è¡¥å……åŠ¨ä½œã€‚',
    steps: [
      'è°ƒæ•´é å«é«˜åº¦ï¼Œä½¿è†å…³èŠ‚ä¸æœºå™¨æ—‹è½¬è½´å¯¹é½ï¼Œå°è…¿å«åœ¨è„šè¸ä¸Šæ–¹ã€‚',
      'åŒæ‰‹æ‰¶æ¡æŠŠç¨³å®šèº«ä½“ï¼Œæ”¶ç´§å¤§è…¿å‰ä¾§ã€‚',
      'å‘¼æ°”æ—¶ä¼¸ç›´è†å…³èŠ‚ï¼Œå°†å°è…¿å‘å‰æŠ¬èµ·ï¼Œé¡¶ç«¯ç¨ä½œåœé¡¿ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢ä¸‹æ”¾å›èµ·å§‹ä½ç½®ï¼Œä¸è¦è®©é…é‡å®Œå…¨è½åº•ã€‚'
    ],
    tips: [
      'é‡é‡ä¸å®œè¿‡å¤§ï¼Œè†å…³èŠ‚æœ‰ä¸é€‚å²çš„äººé¿å…å¤§é‡é‡å†²å‡»ã€‚',
      'å‘åŠ›æ—¶ä¸“æ³¨æƒ³è±¡å¤§è…¿å‰ä¾§å‘åŠ›ï¼Œä¸è¦çŒ›ç”©å°è…¿ã€‚',
      'å¯åœ¨è…¿éƒ¨è®­ç»ƒæœ«å°¾é‡‡ç”¨ 12â€“15 æ¬¡é«˜é‡å¤åšå……è¡€ã€‚'
    ]
  },
  {
    id: 'lying_leg_curl',
    name: 'ä¿¯å§è…¿å¼¯ä¸¾',
    category: 'è…¿éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['è…˜ç»³è‚Œ (å¤§è…¿åä¾§)', 'è‡€å¤§è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'ä¸»è¦è®­ç»ƒå¤§è…¿åä¾§ï¼Œæœ‰åŠ©äºå¹³è¡¡å‰åä¾§è‚Œè‚‰åŠ›é‡ï¼Œä¿æŠ¤è†å…³èŠ‚ã€‚',
    steps: [
      'ä¿¯å§åœ¨å™¨æ¢°ä¸Šï¼Œè†å…³èŠ‚ä¸æ—‹è½¬è½´å¯¹é½ï¼Œå°è…¿å«åœ¨è„šè¸ä¸Šæ–¹ã€‚',
      'æ”¶ç´§æ ¸å¿ƒä¸è‡€éƒ¨ï¼Œä¿æŒé«‹éƒ¨è´´è¿‘å«å­ã€‚',
      'å‘¼æ°”æ—¶å¼¯æ›²è†å…³èŠ‚ï¼Œå°†è„šè·Ÿå‘è‡€éƒ¨æ–¹å‘æ‹‰èµ·ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢è¿˜åŸï¼Œé…é‡ä¸å®Œå…¨è½åº•ã€‚'
    ],
    tips: [
      'é¿å…è‡€éƒ¨æ˜æ˜¾æŠ¬ç¦»å«å­ï¼Œå¦åˆ™ä¼šåˆ†æ•£åˆºæ¿€å¹¶å¢åŠ ä¸‹èƒŒå‹åŠ›ã€‚',
      'é‡é‡å®å¯è½»ä¸€äº›ä¹Ÿä¸è¦çŒ›ç”©è„šï¼Œä¿æŒå…¨ç¨‹æ§åˆ¶ã€‚'
    ]
  },
  {
    id: 'smith_squat',
    name: 'å²å¯†æ–¯æ·±è¹²',
    category: 'è…¿éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°', // å²å¯†æ–¯æœºå½’ç±»ä¸ºå›ºå®šè½¨è¿¹å™¨æ¢°
    muscles: ['è‚¡å››å¤´è‚Œ', 'è‡€å¤§è‚Œ', 'è…˜ç»³è‚Œ', 'æ ¸å¿ƒ'],
    difficulty: 'ä¸­ç­‰',
    description: 'åˆ©ç”¨å²å¯†æ–¯æœºå›ºå®šè½¨è¿¹è¿›è¡Œæ·±è¹²ï¼Œå‡å°‘å¹³è¡¡å‹åŠ›ï¼Œæœ‰åŠ©äºæ–°æ‰‹å»ºç«‹ä¸‹è¹²æ¨¡å¼ã€‚',
    steps: [
      'å°†æ æ”¾åœ¨æ–œæ–¹è‚Œä¸Šï¼ŒåŒè„šç•¥å®½äºè‚©ï¼Œè„šå°–å¾®å¤–å±•ã€‚',
      'èº«ä½“å¾®å¾®åä»°ç½®äºæ ä¸‹æ–¹ï¼Œæ”¶ç´§æ ¸å¿ƒï¼Œèƒ¸éƒ¨æŠ¬èµ·ã€‚',
      'å¸æ°”æ—¶è‡€éƒ¨å‘ååã€å¼¯æ›²è†ç›–ï¼Œä¸‹è¹²è‡³å¤§è…¿æ¥è¿‘ä¸åœ°é¢å¹³è¡Œã€‚',
      'è„šè·Ÿå‘åŠ›ç«™èµ·ï¼Œä¿æŒèƒŒéƒ¨ä¸­ç«‹è¿”å›èµ·å§‹ã€‚'
    ],
    tips: [
      'æƒ³è±¡å¾€ååæ¤…å­ï¼Œé¿å…è†ç›–è¿‡åº¦å‰ç§»ã€å‹åŠ›é›†ä¸­åœ¨è†å…³èŠ‚ã€‚',
      'è†ç›–æ–¹å‘ä¸è„šå°–ä¿æŒä¸€è‡´ï¼Œé¿å…å†…æ‰£ã€‚',
      'åˆå­¦é˜¶æ®µå¯ä»…ç”¨æ æ†ï¼Œå¤šåšä½é‡é‡é«˜æ¬¡æ•°ï¼Œç†Ÿæ‚‰åŠ¨ä½œè½¨è¿¹ã€‚'
    ]
  },
  {
    id: 'barbell_squat',
    name: 'æ é“ƒæ·±è¹²',
    category: 'è…¿éƒ¨',
    equipment: 'æ é“ƒ',
    muscles: ['è‚¡å››å¤´è‚Œ', 'è‡€å¤§è‚Œ', 'è…˜ç»³è‚Œ', 'æ ¸å¿ƒ'],
    difficulty: 'å›°éš¾',
    description: 'ä¸‹è‚¢ç»¼åˆæ€§åŠ¨ä½œï¼Œå¯¹åŠ›é‡å’ŒæŠ€æœ¯è¦æ±‚è¾ƒé«˜ï¼Œå»ºè®®åœ¨æœ‰ä¸€å®šåŸºç¡€å¹¶æŒæ¡æ ¸å¿ƒæ§åˆ¶åå†é€æ­¥åŠ é‡ã€‚',
    steps: [
      'æ é“ƒæ”¾åœ¨æ–œæ–¹è‚Œä½ç½®ï¼Œä¸¤æ‰‹ç•¥å®½äºè‚©æ¡æ ï¼Œè‚©èƒ›æ”¶ç´§ã€‚',
      'åŒè„šä¸è‚©åŒå®½æˆ–ç•¥å®½ï¼Œè„šå°–ç•¥å¤–å±•ï¼Œç›®è§†å‰æ–¹ã€‚',
      'å¸æ°”æ”¶ç´§æ ¸å¿ƒï¼Œè‡€éƒ¨å‘ååå¹¶å¼¯æ›²è†ç›–ï¼Œä¸‹è¹²è‡³å¤§è…¿ä¸åœ°é¢å¹³è¡Œæˆ–ç•¥ä½ã€‚',
      'è„šè·Ÿå‘åŠ›ç«™èµ·ï¼Œä¿æŒèƒ¸éƒ¨å‘å‰å‘ä¸Šï¼Œä¸è¦å¡Œè…°å¼“èƒŒã€‚'
    ],
    tips: [
      'å»ºè®®å…ˆä»å¾’æ‰‹æ·±è¹²ã€å²å¯†æ–¯æ·±è¹²ç»ƒä¹ ï¼Œç¡®è®¤åŠ¨ä½œç¨³å®šå†ä¸Šæ é“ƒã€‚',
      'å…¨ç¨‹ä¿æŒè…°èƒŒç•¥å¾®ç”Ÿç†å‰å‡¸ï¼Œé¿å…åœ†èƒŒå’Œå¡Œè…°ã€‚',
      'åŠ¨ä½œå˜å½¢æ—¶ä¸è¦ç¡¬é¡¶é‡é‡ï¼Œå®‰å…¨æ€§ä¼˜å…ˆäºæ•°å­—ã€‚'
    ]
  },
  {
    id: 'db_lunge',
    name: 'å“‘é“ƒå¼“æ­¥è¹²',
    category: 'è…¿éƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['è‚¡å››å¤´è‚Œ', 'è‡€å¤§è‚Œ', 'è…˜ç»³è‚Œ', 'è‡€ä¸­è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'å•è…¿ä¸»å¯¼çš„åŠ¨ä½œï¼Œç”¨äºæ”¹å–„å·¦å³è…¿åŠ›é‡å·®å¼‚å’Œä¸‹è‚¢ç¨³å®šæ€§ã€‚',
    steps: [
      'åŒæ‰‹å„æŒä¸€åªå“‘é“ƒè‡ªç„¶ä¸‹å‚ï¼ŒåŒè„šä¸é«‹åŒå®½ç«™ç«‹ã€‚',
      'å‘å‰è¿ˆä¸€å¤§æ­¥ï¼Œå‰è„šè¸©ç¨³ï¼Œåè„šè„šå°–æ”¯æ’‘ã€‚',
      'å¼¯æ›²åŒè†è®©èº«ä½“å‚ç›´ä¸‹æ²‰ï¼Œç›´åˆ°å‰è…¿å¤§è…¿æ¥è¿‘ä¸åœ°é¢å¹³è¡Œã€‚',
      'å‰è„šè„šè·Ÿå‘åŠ›æ¨å›èµ·å§‹ä½ç½®ï¼Œæ¢è…¿é‡å¤ã€‚'
    ],
    tips: [
      'ä¸Šèº«ç•¥å‰å€¾ä½†ä¸è¦åœ†èƒŒï¼Œç›®è§†å‰æ–¹ã€‚',
      'ä¸‹æ²‰æ—¶å‰è†ä¸è¦æ˜æ˜¾è¶…è¿‡è„šå°–ï¼Œè†ç›–ä¿æŒä¸è„šå°–æ–¹å‘ä¸€è‡´ã€‚'
    ]
  },

  // === èƒ¸éƒ¨ Chest ===
  {
    id: 'chest_press_machine',
    name: 'åå§¿æ¨èƒ¸æœº',
    category: 'èƒ¸éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['èƒ¸å¤§è‚Œ', 'å‰ä¸‰è§’è‚Œ', 'è‚±ä¸‰å¤´è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'æ¨¡æ‹Ÿå§æ¨çš„æ¨ä¸¾åŠ¨ä½œï¼Œè½¨è¿¹å›ºå®šï¼Œæ›´ä¾¿äºæ–°æ‰‹é”å®šèƒ¸éƒ¨å‘åŠ›ï¼Œå®‰å…¨æ€§é«˜ã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…é«˜åº¦ï¼Œä½¿æŠŠæ‰‹å¤§è‡´åœ¨èƒ¸ä¸­éƒ¨ç•¥ä½ä½ç½®ã€‚',
      'èƒŒéƒ¨ç´§è´´é å«ï¼ŒåŒè„šç¨³è¸©åœ°é¢ï¼Œæ¡ä½æŠŠæ‰‹ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢è®©æŠŠæ‰‹å›åˆ°æ¥è¿‘èƒ¸éƒ¨ä½ç½®ã€‚',
      'å‘¼æ°”æ—¶ç”¨èƒ¸éƒ¨å‘åŠ›å°†æŠŠæ‰‹æ¨å‘å‰æ–¹ï¼Œè‚˜å…³èŠ‚æ¥è¿‘ä¼¸ç›´å³å¯ã€‚'
    ],
    tips: [
      'æƒ³è±¡ç”¨èƒ¸æŠŠæŠŠæ‰‹æ¨å‡ºå»ï¼Œè€Œä¸æ˜¯ä»…é æ‰‹è‡‚ç”¨åŠ›ã€‚',
      'ä¿æŒè‚©èƒ›ç•¥å‘åæ”¶ç´§ï¼Œæœ‰åŠ©äºæé«˜èƒ¸è‚Œå‚ä¸åº¦ã€‚',
      'å¦‚æœè‚©å‰ä¾§æœ‰ä¸é€‚ï¼Œå¯ç•¥å¾®è°ƒä½é‡é‡å’Œæ´»åŠ¨èŒƒå›´ã€‚'
    ]
  },
  {
    id: 'pec_fly_machine',
    name: 'è´è¶æœºå¤¹èƒ¸',
    category: 'èƒ¸éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['èƒ¸å¤§è‚Œ (åå†…ä¾§)'],
    difficulty: 'ç®€å•',
    description: 'é€šè¿‡åŒè‡‚åˆæ‹¢åŠ¨ä½œé›†ä¸­åˆºæ¿€èƒ¸å†…ä¾§ï¼Œé€‚åˆä½œä¸ºæ¨ä¸¾åè¡¥å……åŠ¨ä½œã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…é«˜åº¦ï¼Œä½¿ä¸Šè‡‚ä¸åœ°é¢å¤§è‡´å¹³è¡Œã€‚',
      'åŒå‰è‡‚æˆ–æ‰‹è‚˜è´´åœ¨å«å­ä¸Šï¼Œèƒ¸éƒ¨æŒºèµ·ã€‚',
      'å‘¼æ°”æ—¶å‘å‰åˆæ‹¢åŒè‡‚ï¼Œè‡³æ‰‹è‚˜æ¥è¿‘ç›¸ç¢°ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢å›åˆ°èµ·å§‹ä½ç½®ï¼Œä¿æŒèƒ¸éƒ¨æ‰“å¼€ã€‚'
    ],
    tips: [
      'è‚˜å…³èŠ‚è§’åº¦å¤§è‡´ä¿æŒä¸å˜ï¼Œé¿å…å˜æˆæ¨ä¸¾åŠ¨ä½œã€‚',
      'é¡¶å³°æ”¶ç¼©åœé¡¿ 1 ç§’ï¼Œæ„Ÿå—èƒ¸è‚ŒæŒ¤å‹ã€‚',
      'é‡é‡ä¸å®œè¿‡å¤§ï¼Œä»¥å¯æ§å’Œèƒ¸éƒ¨å‘åŠ›æ„Ÿæ˜æ˜¾ä¸ºä¸»ã€‚'
    ]
  },
  {
    id: 'cable_fly',
    name: 'ç»³ç´¢å¤¹èƒ¸ (ç«™å§¿)',
    category: 'èƒ¸éƒ¨',
    equipment: 'ç»³ç´¢',
    muscles: ['èƒ¸å¤§è‚Œ (ä¸­ä¸‹æŸ)', 'å‰ä¸‰è§’è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'åˆ©ç”¨ç»³ç´¢æä¾›æŒç»­å¼ åŠ›ï¼Œé€‚åˆå¡‘é€ èƒ¸éƒ¨çº¿æ¡å’ŒæŒ¤å‹æ„Ÿã€‚',
    steps: [
      'å°†æ»‘è½®é«˜åº¦è°ƒæ•´è‡³èƒ¸éƒ¨é™„è¿‘ï¼ŒåŒæ‰‹å„æ¡ä¸€æ‰‹æŸ„ã€‚',
      'ä¸€è„šåœ¨å‰ä¸€è„šåœ¨åç«™ç¨³ï¼Œèº«ä½“ç•¥å¾®å‰å€¾ï¼Œè‚˜å…³èŠ‚å¾®å±ˆã€‚',
      'å‘¼æ°”æ—¶åƒæŠ±æ ‘å¹²ä¸€æ ·ï¼Œå°†åŒæ‰‹åœ¨èº«ä½“å‰æ–¹åˆæ‹¢ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢è¿˜åŸåˆ°èµ·å§‹ä½ç½®ï¼Œä¿æŒèƒ¸éƒ¨æ‰“å¼€ã€‚'
    ],
    tips: [
      'ä¸Šè‡‚å§‹ç»ˆç•¥å¼¯ï¼Œé¿å…åœ¨è¿‡ç¨‹ä¸­å¤§å¹…åº¦æ”¹å˜è‚˜è§’ã€‚',
      'é‡é‡æ§åˆ¶åœ¨èƒ½ç¨³å®šç«™å§¿ã€ä¸è¿‡åº¦æ‘‡æ™ƒçš„èŒƒå›´ã€‚'
    ]
  },
  {
    id: 'flat_barbell_bench',
    name: 'å¹³æ¿æ é“ƒå§æ¨',
    category: 'èƒ¸éƒ¨',
    equipment: 'æ é“ƒ',
    muscles: ['èƒ¸å¤§è‚Œ', 'è‚±ä¸‰å¤´è‚Œ', 'å‰ä¸‰è§’è‚Œ'],
    difficulty: 'å›°éš¾',
    description: 'ç»å…¸çš„èƒ¸éƒ¨åŠ›é‡åŠ¨ä½œä¹‹ä¸€ï¼Œé€‚åˆæœ‰ä¸€å®šåŸºç¡€åé€æ¸å¢åŠ é‡é‡ã€‚',
    steps: [
      'ä»°å§åœ¨å§æ¨å‡³ä¸Šï¼Œçœ¼ç›å¤§è‡´å¯¹å‡†æ é“ƒã€‚',
      'ç•¥æ”¶è‚©èƒ›å’Œä¸‹èƒŒå½¢æˆç¨³å®šæ”¯æ’‘ï¼ŒåŒè„šç¨³è¸©åœ°é¢ã€‚',
      'å°†æ é“ƒä»æ¶ä¸Šç§»å‡ºï¼Œå¸æ°”æ—¶ç¼“æ…¢ä¸‹æ”¾è‡³èƒ¸ä¸­éƒ¨é™„è¿‘ã€‚',
      'å‘¼æ°”æ—¶ç”¨èƒ¸å’Œæ‰‹è‡‚å‘åŠ›å°†æ é“ƒæ¨å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'å…¨ç¨‹é¿å…è€¸è‚©ï¼Œä¿æŒè‚©èƒ›ç¨³å®šä»¥ä¿æŠ¤è‚©å…³èŠ‚ã€‚',
      'ä¸‹æ”¾æ—¶ä¸è¦ç ¸èƒ¸ï¼Œä¿æŒå¯æ§çš„æ¥è¿‘è§¦ç¢°ã€‚',
      'è¾ƒå¤§é‡é‡æ—¶å»ºè®®æœ‰åŒä¼´ä¿æŠ¤æˆ–ä½¿ç”¨å®‰å…¨æ ã€‚'
    ]
  },
  {
    id: 'incline_barbell_bench',
    name: 'ä¸Šæ–œæ é“ƒå§æ¨',
    category: 'èƒ¸éƒ¨',
    equipment: 'æ é“ƒ',
    muscles: ['èƒ¸å¤§è‚Œä¸ŠæŸ', 'å‰ä¸‰è§’è‚Œ', 'è‚±ä¸‰å¤´è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'é€šè¿‡ä¸Šæ–œè§’åº¦åŠ å¼ºå¯¹ä¸Šèƒ¸çš„åˆºæ¿€ï¼Œé…åˆå¹³æ¿å§æ¨å¯æ›´å…¨é¢åœ°å‘å±•èƒ¸éƒ¨ã€‚[Image of incline bench press anatomy]',
    steps: [
      'å°†å‡³å­è°ƒè‡³çº¦ 30Â°â€“45Â° ä¸Šæ–œï¼Œä»°å§åçœ¼ç›å¤§è‡´å¯¹å‡†æ é“ƒã€‚',
      'åŒè„šç¨³è¸©åœ°é¢ï¼Œç•¥æ”¶è‚©èƒ›ï¼ŒåŒæ‰‹ç•¥å®½äºè‚©æ¡æ ã€‚',
      'å¸æ°”æ—¶å°†æ é“ƒä¸‹æ”¾è‡³é”éª¨ä¸èƒ¸ä¸Šéƒ¨ä¹‹é—´åŒºåŸŸã€‚',
      'å‘¼æ°”æ—¶ç”¨ä¸Šèƒ¸å‘åŠ›å°†æ é“ƒæ¨å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'è§’åº¦ä¸å®œè¿‡é«˜ï¼Œå¦åˆ™è‚©éƒ¨å—åŠ›è¿‡å¤§ä¸”èƒ¸éƒ¨å‚ä¸é™ä½ã€‚',
      'æ³¨æ„æ§åˆ¶ä¸‹æ”¾é€Ÿåº¦ï¼Œé¿å…å¯¹è‚©å‰ä¾§é€ æˆå†²å‡»ã€‚'
    ]
  },
  {
    id: 'flat_db_bench',
    name: 'å¹³æ¿å“‘é“ƒå§æ¨',
    category: 'èƒ¸éƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['èƒ¸å¤§è‚Œ', 'è‚±ä¸‰å¤´è‚Œ', 'å‰ä¸‰è§’è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'æ´»åŠ¨èŒƒå›´æ›´å¤§ï¼Œè‡ªç”±åº¦æ›´é«˜ï¼Œå¯ä»¥å¾®è°ƒè§’åº¦é€‚é…è‡ªå·±çš„è‚©å…³èŠ‚çŠ¶æ€ã€‚',
    steps: [
      'ååœ¨å‡³å­è¾¹ç¼˜ï¼Œå°†å“‘é“ƒæ”¾åœ¨å¤§è…¿ä¸Šï¼Œèººä¸‹æ—¶ç”¨è…¿å°†å“‘é“ƒå¸¦åˆ°èƒ¸ä¸Šæ–¹ã€‚',
      'æŒå¿ƒæœå‰ï¼Œè‚˜ç•¥å¤–å±•ï¼Œä¸‹èƒŒä¿æŒè‡ªç„¶å¼§åº¦ã€‚',
      'å¸æ°”æ—¶ä¸‹æ”¾å“‘é“ƒè‡³æ¥è¿‘èƒ¸ä¸¤ä¾§ã€‚',
      'å‘¼æ°”æ—¶ç”¨èƒ¸å‘åŠ›æ¨èµ·å“‘é“ƒï¼Œé¡¶ç«¯ç•¥é æ‹¢ä½†ä¸ç¢°æ’ã€‚'
    ],
    tips: [
      'ä¸Šã€ä¸‹æ–¹éƒ½ä¿æŒå¯æ§ï¼Œä¸è¦åˆ©ç”¨æƒ¯æ€§çŒ›ç”©ã€‚',
      'é‡é‡è¾ƒå¤§æ—¶éœ€è¦æœ‰äººé€’å“‘é“ƒä¸ä¿æŠ¤ã€‚'
    ]
  },
  {
    id: 'db_fly',
    name: 'å¹³æ¿å“‘é“ƒé£é¸Ÿ',
    category: 'èƒ¸éƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['èƒ¸å¤§è‚Œ (æ‹‰ä¼¸å’Œå†…æ”¶)', 'å‰ä¸‰è§’è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'å¼ºè°ƒèƒ¸éƒ¨æ‹‰ä¼¸å’Œå†…æ”¶ï¼Œå¯¹è‚©éƒ¨ç¨³å®šæ€§è¦æ±‚è¾ƒé«˜ï¼Œé€‚åˆä½œä¸ºè¾ƒè½»é‡é‡çš„æ„Ÿè§‰å‹åŠ¨ä½œã€‚',
    steps: [
      'ä»°å§åœ¨å¹³æ¿å‡³ä¸Šï¼ŒåŒæ‰‹æŒå“‘é“ƒäºèƒ¸ä¸Šæ–¹ï¼ŒæŒå¿ƒç›¸å¯¹ã€‚',
      'è‚˜å…³èŠ‚å¾®å±ˆï¼Œä¿æŒè¿™ä¸€è§’åº¦ä¸å˜ã€‚',
      'å¸æ°”æ—¶å‘ä¸¤ä¾§ç¼“æ…¢æ‰“å¼€æ‰‹è‡‚ï¼Œæ„Ÿå—èƒ¸éƒ¨æ‹‰ä¼¸ã€‚',
      'å‘¼æ°”æ—¶åƒæŠ±å¤§æ ‘ä¸€æ ·å°†å“‘é“ƒå‘ä¸Šåˆæ‹¢å›åˆ°èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'ä¸‹æ”¾æ·±åº¦ä»¥ä¸å¼•èµ·è‚©å‰ä¾§æ˜æ˜¾ä¸é€‚ä¸ºç•Œï¼Œä¸è¦è¿‡åˆ†è¿½æ±‚â€œåˆ°æœ€åº•â€ã€‚',
      'å…¨ç¨‹ä¿æŒé‡é‡å¯æ§ï¼Œé¿å…çªç„¶å¤±åŠ›ã€‚'
    ]
  },

  // === èƒŒéƒ¨ Back ===
  {
    id: 'lat_pulldown',
    name: 'é«˜ä½ä¸‹æ‹‰',
    category: 'èƒŒéƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['èƒŒé˜”è‚Œ', 'ä¸‹æ–œæ–¹è‚Œ', 'è‚±äºŒå¤´è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'æ¨¡æ‹Ÿå¼•ä½“å‘ä¸Šçš„æ‹‰åŠ¨åŠ¨ä½œï¼Œæ˜¯æ–°æ‰‹è®­ç»ƒèƒŒé˜”è‚Œçš„æ ¸å¿ƒåŠ¨ä½œä¹‹ä¸€ã€‚',
    steps: [
      'ååœ¨å™¨æ¢°ä¸Šï¼Œè°ƒæ•´å¤§è…¿å‹å«å›ºå®šèº«ä½“ã€‚',
      'å®½æ¡æ¨ªæ ï¼Œå¾®å¾®åä»°çº¦ 10â€“15Â°ï¼Œèƒ¸éƒ¨æŠ¬èµ·ã€‚',
      'å‘¼æ°”æ—¶å°†æ¨ªæ æ‹‰å‘ä¸Šèƒ¸æˆ–é”éª¨é™„è¿‘ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶æ¨ªæ ç¼“æ…¢å›åˆ°èµ·å§‹ä½ç½®ï¼Œæ‰‹è‡‚æ¥è¿‘ä¼¸ç›´å³å¯ã€‚'
    ],
    tips: [
      'æƒ³è±¡è…‹ä¸‹å¤¹ä½ä¸œè¥¿ï¼Œç”¨èƒŒè€Œä¸æ˜¯çº¯æ‰‹è‡‚å‘åŠ›ã€‚',
      'é¿å…èº«ä½“å¤§å¹…æ‘‡æ‘†å€ŸåŠ›ï¼Œé‡é‡è¿‡å¤§å°±å‡è½»ã€‚',
      'è‚©èƒ›ä¸‹æ²‰æ”¶ç´§ï¼Œèƒ½æ›´å¥½æ‰¾åˆ°èƒŒéƒ¨å‘åŠ›ã€‚'
    ]
  },
  {
    id: 'seated_row_machine',
    name: 'åå§¿åˆ’èˆ¹æœº (èƒ¸å«)',
    category: 'èƒŒéƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['ä¸­èƒŒ (è±å½¢è‚Œã€æ–œæ–¹è‚Œ)', 'èƒŒé˜”è‚Œ', 'è‚±äºŒå¤´è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'èƒ¸éƒ¨æœ‰æ”¯æ’‘ï¼Œè…°èƒŒè´Ÿæ‹…æ›´å°ï¼Œé€‚åˆå¤šæ•°äººç”¨æ¥ç»ƒä¹ æ­£ç¡®çš„â€œå¤¹è‚©èƒ›â€åŠ¨ä½œã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…ä¸èƒ¸å«ï¼Œè®©èƒ¸éƒ¨èˆ’é€‚è´´é ï¼ŒåŒè„šè¸©ç¨³ã€‚',
      'åŒæ‰‹æ¡ä½æŠŠæ‰‹ï¼Œè‚©è†€æ”¾æ¾ä¸‹æ²‰ã€‚',
      'å‘¼æ°”æ—¶å¤¹ç´§è‚©èƒ›éª¨ï¼Œå°†æŠŠæ‰‹æ‹‰å‘ä¸‹èƒ¸æˆ–è‚‹éª¨é™„è¿‘ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶è¿˜åŸï¼Œæ‰‹è‡‚ä¼¸ç›´ä½†ä¸è€¸è‚©ã€‚'
    ],
    tips: [
      'åŠ¨ä½œé¡ºåºï¼šå…ˆå¤¹è‚©èƒ›ï¼Œå†ç”¨æ‰‹è‡‚å¼¯æ›²æ‹‰åŠ¨ã€‚',
      'ä¿æŒå¤´éƒ¨ä¸­ç«‹ï¼Œé¿å…æ¢å¤´çœ‹é•œå­å¯¼è‡´é¢ˆéƒ¨ç´§å¼ ã€‚'
    ]
  },
  {
    id: 'cable_row',
    name: 'åå§¿ä½ä½åˆ’èˆ¹',
    category: 'èƒŒéƒ¨',
    equipment: 'ç»³ç´¢', // ä½¿ç”¨ç»³ç´¢/è‡ªç”±å™¨æ¢°åˆ†ç±»
    muscles: ['èƒŒé˜”è‚Œ', 'è±å½¢è‚Œ', 'ä¸­ä¸‹æ–œæ–¹è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'æé«˜ä¸­èƒŒåšåº¦ï¼Œå¸®åŠ©æ”¹å–„å«èƒ¸åœ†è‚©é—®é¢˜ã€‚',
    steps: [
      'ååœ¨å‡³å­ä¸Šï¼ŒåŒè„šè¸©è¸æ¿ï¼ŒåŒæ‰‹æ¡æŠŠï¼Œèº«ä½“ç•¥å‰å€¾ã€‚',
      'æ”¶ç´§æ ¸å¿ƒï¼Œä¿æŒèƒŒéƒ¨è‡ªç„¶ä¼¸ç›´ã€‚',
      'å‘¼æ°”æ—¶å°†æŠŠæ‰‹æ‹‰å‘è…¹éƒ¨æˆ–è‚šè„é™„è¿‘ï¼Œè‚©èƒ›éª¨å‘åå¤¹ç´§ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶è¿˜åŸï¼Œæ‰‹è‡‚ä¼¸ç›´ä½†ä¸è€¸è‚©ã€‚'
    ],
    tips: [
      'é¿å…é è…°èƒŒå¤§å¹…åº¦å‰åæ‘‡æ™ƒå€ŸåŠ›ã€‚',
      'æ‹‰åˆ°æœ€åç¨ä½œåœé¡¿ï¼Œä¸“æ³¨æ„Ÿå—èƒŒéƒ¨æ”¶ç¼©ã€‚'
    ]
  },
  {
    id: 'straight_arm_pulldown',
    name: 'ç›´è‡‚ä¸‹å‹',
    category: 'èƒŒéƒ¨',
    equipment: 'ç»³ç´¢',
    muscles: ['èƒŒé˜”è‚Œ (ä¸‹éƒ¨)', 'å¤§åœ†è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'å¼ºè°ƒèƒŒé˜”è‚Œä¸‹æ‹‰è½¨è¿¹çš„æ„Ÿè§‰ï¼Œæœ‰åŠ©äºç»ƒä¹ â€œç”¨èƒŒä¸‹æ‹‰è€Œä¸æ˜¯ç”¨æ‰‹æ‹‰â€ã€‚[Image of straight arm pulldown anatomy]',
    steps: [
      'ç«™åœ¨é«˜ä½æ»‘è½®å‰ï¼ŒåŒæ‰‹å®½æ¡ç›´æ†ï¼Œæ‰‹è‡‚ä¼¸ç›´ã€‚',
      'èº«ä½“ç•¥å‰å€¾ï¼Œæ ¸å¿ƒæ”¶ç´§ï¼Œæ‰‹è‡‚ä¿æŒæ¥è¿‘ä¼¸ç›´ä¸é”æ­»ã€‚',
      'å‘¼æ°”æ—¶ä»¥è‚©å…³èŠ‚ä¸ºè½´ï¼Œå°†ç›´æ†æ²¿å¼§çº¿å‹å‘å¤§è…¿å‰æ–¹ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶è¿˜åŸåˆ°èµ·å§‹ä½ç½®ï¼Œæ„Ÿå—èƒŒé˜”è¢«æ‹‰é•¿ã€‚'
    ],
    tips: [
      'è¿‡ç¨‹ä¸­è‚˜å…³èŠ‚åªåšå¾®å°å˜åŒ–ï¼Œé¿å…å˜æˆå¼¯ä¸¾åŠ¨ä½œã€‚',
      'é‡é‡è¦å¯æ§ï¼Œç›®æ ‡æ˜¯å»ºç«‹èƒŒé˜”è‚Œæ„Ÿè§‰è€Œä¸æ˜¯è¿½æ±‚æ•°å­—ã€‚'
    ]
  },
  {
    id: 'barbell_row',
    name: 'ä¿¯èº«æ é“ƒåˆ’èˆ¹',
    category: 'èƒŒéƒ¨',
    equipment: 'æ é“ƒ',
    muscles: ['èƒŒé˜”è‚Œ', 'è±å½¢è‚Œ', 'æ–œæ–¹è‚Œ', 'ç«–è„Šè‚Œ'],
    difficulty: 'å›°éš¾',
    description: 'å…¸å‹çš„åšèƒŒåŠ¨ä½œï¼Œå¯¹è…°èƒŒç¨³å®šæ€§è¦æ±‚è¾ƒé«˜ï¼Œé€‚åˆå·²æœ‰åŸºç¡€çš„äººã€‚',
    steps: [
      'åŒè„šä¸é«‹åŒå®½ç«™ç«‹ï¼Œé«‹å…³èŠ‚æŠ˜å ï¼Œèº«ä½“å‰å€¾çº¦ 45Â°ã€‚',
      'åŒæ‰‹ç•¥å®½äºè‚©æ¡æ ï¼ŒèƒŒéƒ¨ä¿æŒä¸­ç«‹ï¼Œæ ¸å¿ƒæ”¶ç´§ã€‚',
      'å‘¼æ°”æ—¶å°†æ é“ƒæ‹‰å‘è‚šè„æˆ–ä¸‹è…¹éƒ¨ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶ä¸‹æ”¾ï¼Œæ‰‹è‡‚æ¥è¿‘ä¼¸ç›´ä½†ä¸å®Œå…¨æ¾è„±ã€‚'
    ],
    tips: [
      'å…¨ç¨‹ä¿æŒä¸‹èƒŒç´§å¼ ï¼Œä¸è¦å¡Œè…°åœ†èƒŒã€‚',
      'å¦‚è…°éƒ¨æœ‰æ—¢å¾€ä¸é€‚ï¼Œä¼˜å…ˆä½¿ç”¨åå§¿åˆ’èˆ¹ç­‰å™¨æ¢°æ›¿ä»£ã€‚'
    ]
  },
  {
    id: 'db_row',
    name: 'å•è‡‚å“‘é“ƒåˆ’èˆ¹',
    category: 'èƒŒéƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['èƒŒé˜”è‚Œ', 'è±å½¢è‚Œ', 'æ–œæ–¹è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'å•ä¾§è®­ç»ƒå¯çº æ­£å·¦å³å·®å¼‚ï¼Œå¯¹è…°éƒ¨å‹åŠ›è¾ƒå°ï¼Œé€‚åˆå¤šæ•°äººç»ƒèƒŒå…¥é—¨ã€‚',
    steps: [
      'ä¸€ä¾§è†ç›–å’ŒåŒä¾§æ‰‹æ”¾åœ¨å‡³å­ä¸Šæ”¯æ’‘ï¼Œå¦ä¸€æ¡è…¿åœ¨åœ°ä¸Šã€‚',
      'ç©ºé—²çš„ä¸€æ‰‹æ¡å“‘é“ƒï¼Œæ‰‹è‡‚è‡ªç„¶ä¸‹å‚ï¼ŒèƒŒéƒ¨ä¿æŒå¹³ç›´ã€‚',
      'å‘¼æ°”æ—¶æ²¿èº«ä½“ä¾§é¢å°†å“‘é“ƒæ‹‰å‘è…°éƒ¨æˆ–é«‹éƒ¨é™„è¿‘ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶å“‘é“ƒä¸‹æ”¾å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'èº¯å¹²é¿å…æ‰­è½¬ï¼Œä¸“æ³¨èƒŒéƒ¨å‘åŠ›è€Œä¸æ˜¯åªç”¨æ‰‹è‡‚ç¡¬æ‹‰ã€‚',
      'é¡¶å³°æ”¶ç¼©å¯ä»¥åœé¡¿ 1 ç§’ï¼Œå¢å¼ºèƒŒéƒ¨æŒ¤å‹æ„Ÿã€‚'
    ]
  },

  // === æ‰‹è‡‚ Arms ===
  {
    id: 'curl_machine',
    name: 'å¼¯ä¸¾æœº (è‚±äºŒå¤´)',
    category: 'æ‰‹è‡‚',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['è‚±äºŒå¤´è‚Œ', 'è‚±è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'è½¨è¿¹å›ºå®šï¼Œèƒ½å¸®åŠ©æ–°æ‰‹å­¦ä¼šâ€œé”æ­»è‚˜éƒ¨â€çš„å¼¯ä¸¾æ¨¡å¼ï¼Œå‡å°‘ä¹±æ™ƒã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…é«˜åº¦ï¼Œä½¿ä¸Šè‡‚èˆ’é€‚è´´åœ¨å«å­ä¸Šã€‚',
      'åŒæ‰‹æ¡æŠŠï¼Œæ‰‹è‡‚è‡ªç„¶ä¼¸ç›´ä½†ä¸é”æ­»ã€‚',
      'å‘¼æ°”æ—¶å¼¯æ›²è‚˜å…³èŠ‚ï¼Œå°†æŠŠæ‰‹å·èµ·è‡³æ¥è¿‘è‚©éƒ¨ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢ä¸‹æ”¾å›åˆ°èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'è‚©éƒ¨æ”¾æ¾ï¼Œä¸è¦è€¸è‚©ä»£æ›¿æ‰‹è‡‚å‘åŠ›ã€‚',
      'é¿å…å€ŸåŠ©èº«ä½“æ‘†åŠ¨ï¼Œä¸“æ³¨æ„Ÿå—äºŒå¤´è‚Œæ”¶ç¼©å’Œæ‹‰ä¼¸ã€‚'
    ]
  },
  {
    id: 'triceps_pushdown',
    name: 'ç»³ç´¢ä¸‹å‹ (è‚±ä¸‰å¤´)',
    category: 'æ‰‹è‡‚',
    equipment: 'ç»³ç´¢',
    muscles: ['è‚±ä¸‰å¤´è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'å‘å±•æ‰‹è‡‚åä¾§çº¿æ¡çš„å¸¸è§„åŠ¨ä½œï¼Œå¯ä¸å„ç§å§æ¨åŠ¨ä½œç»„åˆä½¿ç”¨ã€‚',
    steps: [
      'ç»³ç´¢å›ºå®šåœ¨é«˜ä½ï¼ŒåŒæ‰‹æ¡ç»³ä¸¤ç«¯ï¼Œè‚˜éƒ¨è´´è¿‘èº«ä½“ä¸¤ä¾§ã€‚',
      'ä¸Šè‡‚ä¿æŒç¨³å®šï¼Œåªè®©å‰è‡‚æ´»åŠ¨ã€‚',
      'å‘¼æ°”æ—¶å‘ä¸‹ä¼¸å±•æ‰‹è‡‚è‡³è‚˜å…³èŠ‚æ¥è¿‘ä¼¸ç›´ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶è¿˜åŸè‡³å‰è‡‚ç•¥æ°´å¹³çš„ä½ç½®ã€‚'
    ],
    tips: [
      'ä¸è¦è®©è‚˜éƒ¨å‘å‰è·‘ä½ï¼Œä¸Šè‡‚å›ºå®šæ˜¯å…³é”®ã€‚',
      'æœ«ç«¯å¯ä»¥ç•¥å¾®å‘ä¸¤ä¾§åˆ†å¼€ç»³ç´¢ï¼ŒåŠ å¼ºä¸‰å¤´æ”¶ç¼©æ„Ÿã€‚'
    ]
  },
  {
    id: 'barbell_curl',
    name: 'æ é“ƒå¼¯ä¸¾',
    category: 'æ‰‹è‡‚',
    equipment: 'æ é“ƒ',
    muscles: ['è‚±äºŒå¤´è‚Œ', 'è‚±è‚Œ', 'è‚±æ¡¡è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'æ•´ä½“æå‡è‡‚å›´çš„ç»å…¸åŠ¨ä½œï¼Œå¯¹åŠ›é‡å’Œæ§åˆ¶è¦æ±‚éƒ½è¾ƒé«˜ã€‚',
    steps: [
      'åŒè„šä¸è‚©åŒå®½ç«™ç«‹ï¼ŒæŒå¿ƒå‘å‰æ¡ä½æ é“ƒã€‚',
      'ä¸Šè‡‚è´´è¿‘èº«ä½“ä¸¤ä¾§ï¼Œè‚©éƒ¨æ”¾æ¾ï¼Œæ ¸å¿ƒæ”¶ç´§ã€‚',
      'å‘¼æ°”æ—¶å¼¯æ›²è‚˜å…³èŠ‚ï¼Œå°†æ é“ƒå·èµ·è‡³æ¥è¿‘è‚©éƒ¨ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢ä¸‹æ”¾æ é“ƒå›åˆ°å¤§è…¿å‰æ–¹ã€‚'
    ],
    tips: [
      'é¿å…èº«ä½“æ˜æ˜¾åä»°å€ŸåŠ›ï¼Œé‡é‡è¿‡å¤§å°±å‡è½»ã€‚',
      'ä¿æŒæ‰‹è…•ä¸­ç«‹ï¼Œå‡å°‘æ‰‹è…•å‹åŠ›ã€‚'
    ]
  },
  {
    id: 'db_alt_curl',
    name: 'äº¤æ›¿å“‘é“ƒå¼¯ä¸¾',
    category: 'æ‰‹è‡‚',
    equipment: 'å“‘é“ƒ',
    muscles: ['è‚±äºŒå¤´è‚Œ', 'è‚±è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'å•ä¾§äº¤æ›¿è®­ç»ƒæ›´å®¹æ˜“åœ¨æ¯ä¸€ä¾§éƒ½å»ºç«‹è‚Œè‚‰æ„Ÿè§‰ï¼Œå‡å°‘å¼ºä¾§ä»£å¿ã€‚',
    steps: [
      'åŒæ‰‹å„æŒä¸€åªå“‘é“ƒè‡ªç„¶ä¸‹å‚ï¼ŒæŒå¿ƒæœå‘èº«ä½“ã€‚',
      'ä¸€ä¾§æ‰‹è‡‚å¼€å§‹å¼¯ä¸¾ï¼ŒåŒæ—¶æ—‹è½¬æ‰‹è…•ä½¿æŒå¿ƒæœä¸Šã€‚',
      'å·èµ·è‡³æ¥è¿‘è‚©éƒ¨ç¨ä½œåœé¡¿ï¼Œæ§åˆ¶ä¸‹æ”¾ã€‚',
      'å·¦å³äº¤æ›¿è¿›è¡Œï¼Œä¿æŒèº¯å¹²ç¨³å®šã€‚'
    ],
    tips: [
      'ä¸Šè‡‚å°½é‡ä¿æŒå‚ç›´ï¼Œä¸è¦å‘å‰æ‘†åŠ¨ã€‚',
      'é¿å…åˆ©ç”¨æƒ¯æ€§çŒ›ç”©å“‘é“ƒï¼Œå°¤å…¶åœ¨ä¸‹æ”¾é˜¶æ®µè¦æœ‰æ§åˆ¶ã€‚'
    ]
  },

  // === è‚©éƒ¨ Shoulders ===
  {
    id: 'shoulder_press_machine',
    name: 'åå§¿æ¨è‚©æœº',
    category: 'è‚©éƒ¨',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['ä¸‰è§’è‚Œå‰æŸ', 'ä¸‰è§’è‚Œä¸­æŸ', 'è‚±ä¸‰å¤´è‚Œ'],
    difficulty: 'ç®€å•',
    description: 'åœ¨å›ºå®šè½¨è¿¹ä¸‹ç»ƒä¹ å¤´é¡¶æ¨ä¸¾åŠ¨ä½œï¼Œå¯¹æ ¸å¿ƒç¨³å®šæ€§è¦æ±‚è¾ƒä½ï¼Œæ˜¯è‚©æ¨å…¥é—¨é€‰æ‹©ã€‚',
    steps: [
      'è°ƒæ•´åº§æ¤…é«˜åº¦ï¼Œä½¿æŠŠæ‰‹å¤§è‡´ä½äºä¸‹å·´åˆ°è€³æœµä¹‹é—´ã€‚',
      'èƒŒéƒ¨è´´ç´§é å«ï¼ŒåŒè„šç¨³è¸©åœ°é¢ã€‚',
      'å‘¼æ°”æ—¶å°†æŠŠæ‰‹å‘ä¸Šæ¨ä¸¾è‡³æ‰‹è‡‚æ¥è¿‘ä¼¸ç›´ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶æŠŠæ‰‹ä¸‹æ”¾å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'é¿å…è€¸è‚©ï¼Œé¢ˆéƒ¨ä¿æŒæ”¾æ¾ã€‚',
      'è‚©å…³èŠ‚ä¸èˆ’æœçš„æƒ…å†µä¸‹ä¸è¦åœ¨ä½ä½è¿‡åº¦ä¸‹æ”¾ã€‚'
    ]
  },
  {
    id: 'smith_shrug',
    name: 'å²å¯†æ–¯è€¸è‚©',
    category: 'è‚©éƒ¨',
    equipment: 'è‡ªç”±å™¨æ¢°', // å²å¯†æ–¯æœº
    muscles: ['æ–œæ–¹è‚Œä¸ŠæŸ'],
    difficulty: 'ç®€å•',
    description: 'ä¸»è¦è®­ç»ƒä¸Šæ–œæ–¹è‚Œï¼Œæœ‰åŠ©äºå¢å¼ºä¸ŠèƒŒåšåº¦å’Œè‚©é¢ˆç¨³å®šæ€§ã€‚[Image of trapezius muscle anatomy]',
    steps: [
      'ç«™åœ¨å²å¯†æ–¯æœºä¸‹æ–¹ï¼ŒåŒæ‰‹ç•¥å®½äºè‚©æ¡æ ï¼Œæ‰‹è‡‚è‡ªç„¶ä¼¸ç›´ã€‚',
      'å‘¼æ°”æ—¶å‘ä¸Šè€¸è‚©ï¼Œå°½é‡è®©è‚©è†€æ¥è¿‘è€³æœµã€‚',
      'åœ¨æœ€é«˜ç‚¹ç¨ä½œåœé¡¿ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢è¿˜åŸï¼Œè‚©è†€å®Œå…¨æ”¾æ¾ä¸‹æ²‰ã€‚'
    ],
    tips: [
      'åŠ¨ä½œè¿‡ç¨‹ä¸­ä¿æŒæ‰‹è‡‚ä¼¸ç›´ï¼Œä¸è¦å¼¯æ›²è‚˜å…³èŠ‚ã€‚',
      'ä¸‹é¢Œä¿æŒç•¥æ”¶ï¼Œä¸è¦ä¼¸å¤´å‰æ¢ã€‚'
    ]
  },
  {
    id: 'barbell_upright_row',
    name: 'æ é“ƒç›´ç«‹åˆ’èˆ¹',
    category: 'è‚©éƒ¨',
    equipment: 'æ é“ƒ',
    muscles: ['ä¸‰è§’è‚Œä¸­æŸ', 'æ–œæ–¹è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'å¸¸è§è‚©éƒ¨/æ–œæ–¹å¤åˆåŠ¨ä½œï¼Œæœ‰ä¸€å®šè‚©è¢–å‹è¿«é£é™©ï¼Œå»ºè®®é‡‡ç”¨ä¸­ç­‰é‡é‡å’Œé€‚ä¸­å¹…åº¦ã€‚',
    steps: [
      'åŒè„šä¸è‚©åŒå®½ç«™ç«‹ï¼ŒåŒæ‰‹ç•¥çª„äºè‚©å®½æ­£æ¡æ é“ƒï¼Œæ é“ƒä½äºå¤§è…¿å‰ã€‚',
      'å‘¼æ°”æ—¶æ²¿èº«ä½“å‰ä¾§å°†æ é“ƒå‘ä¸Šæ‹‰è‡³èƒ¸éƒ¨æˆ–ä¸Šè…¹éƒ¨é«˜åº¦ã€‚',
      'è‚˜éƒ¨æŠ¬é«˜ç•¥é«˜äºæ‰‹è…•ã€‚',
      'å¸æ°”æ—¶æ§åˆ¶ä¸‹æ”¾å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'å¦‚æœè‚©éƒ¨æœ‰ä¸é€‚å²ï¼Œå»ºè®®å‡å°‘åŠ¨ä½œå¹…åº¦æˆ–æ›¿æ¢ä¸ºä¾§å¹³ä¸¾ã€‚',
      'å…¨ç¨‹ä¿æŒèƒŒéƒ¨è‡ªç„¶ç›´ç«‹ï¼Œä¸è¦å‰åæ‘‡æ‘†ã€‚'
    ]
  },
  {
    id: 'db_shoulder_press',
    name: 'åå§¿å“‘é“ƒæ¨ä¸¾',
    category: 'è‚©éƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['ä¸‰è§’è‚Œå‰æŸ', 'ä¸‰è§’è‚Œä¸­æŸ', 'è‚±ä¸‰å¤´è‚Œ'],
    difficulty: 'ä¸­ç­‰',
    description: 'è‡ªç”±åº¦é«˜ï¼Œå¯å¾®è°ƒæ‰‹è…•ä¸è‚˜éƒ¨è§’åº¦é™ä½è‚©å…³èŠ‚å‹åŠ›ï¼Œæ˜¯å¤šæ•°äººé€‚ç”¨çš„è‚©æ¨åŠ¨ä½œã€‚',
    steps: [
      'ååœ¨æœ‰é èƒŒçš„å‡³å­ä¸Šï¼ŒåŒæ‰‹æŒå“‘é“ƒäºè‚©éƒ¨ä¸¤ä¾§ã€‚',
      'æŒå¿ƒå¯æœå‰æˆ–ç•¥å‘å†…ï¼Œè‚˜éƒ¨ç•¥åœ¨èº«ä½“å‰ä¾§ã€‚',
      'å‘¼æ°”æ—¶å°†å“‘é“ƒæ¨è‡³å¤´é¡¶ä¸Šæ–¹ï¼Œæ‰‹è‡‚æ¥è¿‘ä¼¸ç›´ã€‚',
      'å¸æ°”æ—¶ç¼“æ…¢æ§åˆ¶ä¸‹æ”¾è‡³è‚©éƒ¨é™„è¿‘ã€‚'
    ],
    tips: [
      'é¿å…åœ¨åº•éƒ¨ä¸‹æ”¾è¿‡æ·±å¼•èµ·è‚©éƒ¨å¤¹æŒ¤ã€‚',
      'ä¿æŒè…°èƒŒè´´é é èƒŒï¼Œé¿å…æ˜æ˜¾åä»°ã€‚'
    ]
  },
  {
    id: 'reverse_fly',
    name: 'ä¿¯èº«å“‘é“ƒåå‘é£é¸Ÿ',
    category: 'è‚©éƒ¨',
    equipment: 'å“‘é“ƒ',
    muscles: ['ä¸‰è§’è‚ŒåæŸ', 'ä¸ŠèƒŒ'],
    difficulty: 'ä¸­ç­‰',
    description: 'é’ˆå¯¹è‚©åæŸçš„å…³é”®åŠ¨ä½œï¼Œæœ‰åŠ©äºå¹³è¡¡èƒ¸æ¨ç±»è®­ç»ƒé€ æˆçš„è‚©å‰ååŠ›é‡å·®å¼‚ã€‚[Image of rear delt fly muscles]',
    steps: [
      'åŒè„šä¸é«‹åŒå®½ç«™ç«‹ï¼Œé«‹å…³èŠ‚æŠ˜å ï¼Œèº«ä½“å‰å€¾æ¥è¿‘ä¸åœ°é¢å¹³è¡Œã€‚',
      'åŒæ‰‹å„æŒä¸€åªå“‘é“ƒï¼Œè‡ªç„¶ä¸‹å‚ï¼ŒæŒå¿ƒç›¸å¯¹ã€‚',
      'å‘¼æ°”æ—¶å‘ä¸¤ä¾§æŠ¬èµ·æ‰‹è‡‚ï¼Œè‡³ä¸Šè‡‚æ¥è¿‘ä¸åœ°é¢å¹³è¡Œã€‚',
      'å¸æ°”æ—¶æ§åˆ¶ä¸‹æ”¾å›èµ·å§‹ä½ç½®ã€‚'
    ],
    tips: [
      'èƒŒéƒ¨ä¿æŒä¸­ç«‹ï¼Œä¸è¿‡åº¦å¡Œè…°æˆ–æ‹±èƒŒã€‚',
      'å“‘é“ƒé‡é‡ä¸å®œå¤§ï¼Œç›®æ ‡æ˜¯æ„Ÿå—åè‚©å’Œä¸ŠèƒŒæ”¶ç¼©ã€‚'
    ]
  },

  // === æœ‰æ°§ Cardio ===
  {
    id: 'treadmill_walk',
    name: 'è·‘æ­¥æœºå¿«èµ° / æ…¢è·‘',
    category: 'æœ‰æ°§',
    equipment: 'å›ºå®šå™¨æ¢°', // è·‘æ­¥æœºå½’ä¸ºå›ºå®šå™¨æ¢°ç±»
    muscles: ['å¿ƒè‚ºç³»ç»Ÿ', 'ä¸‹è‚¢è€åŠ›'],
    difficulty: 'ç®€å•',
    description: 'æœ€å¸¸è§çš„æœ‰æ°§æ–¹å¼ä¹‹ä¸€ï¼Œé€šè¿‡è°ƒæ•´é€Ÿåº¦å’Œå¡åº¦å¯ä»¥è¦†ç›–ä»æ¢å¤æ€§èµ°è·¯åˆ°ä¸­é«˜å¼ºåº¦æœ‰æ°§è®­ç»ƒã€‚',
    steps: [
      'å…ˆä»¥è¾ƒæ…¢é€Ÿåº¦è¡Œèµ° 3â€“5 åˆ†é’Ÿä½œä¸ºçƒ­èº«ã€‚',
      'é€æ¸è°ƒæ•´åˆ°å¿«èµ°æˆ–è½»å¾®å–˜æ°”ä½†èƒ½è®²è¯çš„æ…¢è·‘é€Ÿåº¦ã€‚',
      'ä¿æŒè‚©è†€æ”¾æ¾ï¼Œç›®è§†å‰æ–¹ï¼Œé¿å…é•¿æ—¶é—´ä½å¤´çœ‹æ‰‹æœºã€‚',
      'è®­ç»ƒç»“æŸå‰ 3â€“5 åˆ†é’Ÿé€æ­¥é™ä½é€Ÿåº¦ä½œä¸ºæ”¾æ¾ã€‚'
    ],
    tips: [
      'åˆšå¼€å§‹ä¸å»ºè®®å¼ºè¡Œé«˜é€Ÿè·‘ï¼Œå…ˆå»ºç«‹åŸºç¡€è€åŠ›å’Œä¹ æƒ¯ã€‚',
      'éœ€è¦æ‰¶æ‰¶æ‰‹æ—¶åº”é€‚å½“é™ä½é€Ÿåº¦ï¼Œé¿å…è™šé«˜çš„é€Ÿåº¦æ•°å­—ã€‚'
    ]
  },
  {
    id: 'bike_cardio',
    name: 'åŠ¨æ„Ÿå•è½¦ / å›ºå®šè„šè¸è½¦',
    category: 'æœ‰æ°§',
    equipment: 'å›ºå®šå™¨æ¢°',
    muscles: ['å¿ƒè‚ºç³»ç»Ÿ', 'å¤§è…¿å‰åä¾§'],
    difficulty: 'ç®€å•',
    description: 'å¯¹è†å…³èŠ‚å†²å‡»ç›¸å¯¹è¾ƒå°ï¼Œé€‚åˆä½“é‡åå¤§æˆ–ä¸é€‚åˆé«˜å†²å‡»è·‘è·³çš„äººè¿›è¡Œæœ‰æ°§è®­ç»ƒã€‚',
    steps: [
      'è°ƒæ•´åå«é«˜åº¦ï¼Œè®©è„šè¸©åˆ°åº•æ—¶è†ç›–ç•¥å¼¯ã€‚',
      'å…ˆä»¥ä½é˜»åŠ›è¸©è¸ 3â€“5 åˆ†é’Ÿçƒ­èº«ã€‚',
      'æ ¹æ®å¿ƒç‡å’Œå‘¼å¸æƒ…å†µé€æ­¥æé«˜é˜»åŠ›æˆ–èŠ‚å¥ã€‚',
      'ç»“æŸå‰é€æ¸é™ä½é˜»åŠ›å’ŒèŠ‚å¥è¿›è¡Œæ”¾æ¾ã€‚'
    ],
    tips: [
      'ä¿æŒè„šå°–å’Œè†ç›–æ–¹å‘ä¸€è‡´ï¼Œå‡å°‘è†å…³èŠ‚æ‰­è½¬å‹åŠ›ã€‚',
      'ä¸ŠåŠèº«å¯ä»¥ç•¥å¾®å‰å€¾ï¼Œä½†é¿å…å¡Œè…°è€¸è‚©ã€‚'
    ]
  },
  {
    id: 'jump_rope',
    name: 'è·³ç»³ (é—´æ­‡)',
    category: 'æœ‰æ°§',
    equipment: 'è‡ªç”±å™¨æ¢°',
    muscles: ['å¿ƒè‚ºç³»ç»Ÿ', 'å°è…¿è‚Œç¾¤', 'åè°ƒæ€§'],
    difficulty: 'ä¸­ç­‰',
    description: 'é«˜æ•ˆç‡ƒè„‚çš„æœ‰æ°§å½¢å¼ä¹‹ä¸€ï¼Œé…åˆé—´æ­‡è®¾è®¡å¯ä»¥æ§åˆ¶å…³èŠ‚å‹åŠ›å¹¶æé«˜è®­ç»ƒè¶£å‘³æ€§ã€‚',
    steps: [
      'æ ¹æ®èº«é«˜é€‰æ‹©åˆé€‚é•¿åº¦çš„è·³ç»³ï¼ŒåŒè„šä¸é«‹åŒå®½ç«™ç«‹ã€‚',
      'ä¸»è¦ç”¨æ‰‹è…•ç”©ç»³ï¼Œè„šå°–è½»ç‚¹åœ°é¢èµ·è·³ã€‚',
      'å¯ä»¥é‡‡ç”¨ 30 ç§’è·³ + 30 ç§’ä¼‘æ¯çš„é—´æ­‡å½¢å¼å¾ªç¯ã€‚',
      'æ ¹æ®ä½“èƒ½é€æ­¥å¢åŠ å·¥ä½œæ—¶é—´å’Œæ€»æ—¶é•¿ã€‚'
    ],
    tips: [
      'ä½“é‡è¾ƒå¤§æˆ–è†è¸æœ‰æ—§ä¼¤è€…ä¸å»ºè®®é•¿æ—¶é—´é«˜å¼ºåº¦è·³ç»³ï¼Œå¯æ”¹ç”¨å•è½¦æˆ–æ¤­åœ†æœºã€‚',
      'ç€åœ°æ—¶è†ç›–å¾®å±ˆï¼Œå‡ç¼“å†²å‡»ã€‚'
    ]
  }
];

const CATEGORIES = ['å…¨éƒ¨', 'èƒ¸éƒ¨', 'èƒŒéƒ¨', 'è…¿éƒ¨', 'è‚©éƒ¨', 'æ‰‹è‡‚', 'æœ‰æ°§'];
const EQUIPMENT_TYPES = ['å…¨éƒ¨', 'å›ºå®šå™¨æ¢°', 'æ é“ƒ', 'å“‘é“ƒ', 'ç»³ç´¢', 'è‡ªç”±å™¨æ¢°']; // ç»Ÿä¸€ä¸‹æ‹‰èœå•

// --- 2. ç»„ä»¶ Components ---

// 2.1 èº«ä½“åˆ†æç»„ä»¶ (Updated Logic)
const BodyAnalyzer = () => {
  const [height, setHeight] = useState('');
  const [weight, setWeight] = useState('');
  const [result, setResult] = useState(null);
  const [aiPlan, setAiPlan] = useState('');
  const [isGeneratingPlan, setIsGeneratingPlan] = useState(false);
  const planRef = useRef(null);

  const calculate = () => {
    if (!height || !weight) return;
    const h = parseFloat(height) / 100; 
    const w = parseFloat(weight); 
    const bmi = (w / (h * h)).toFixed(1);
    
    let type = '';
    let advice = '';
    let proteinRange = '';
    let strategy = '';
    let planDetails = [];

    // New logic based on GymGuide Pro
    if (bmi < 18.5) {
      type = 'åç˜¦';
      strategy = 'å¢è‚Œä¼˜å…ˆ (Bulk)';
      proteinRange = `${(w * 1.6).toFixed(0)} - ${(w * 2.2).toFixed(0)} g`;
      advice = 'ä¼˜å…ˆå¢è‚Œï¼Œå…¼é¡¾å…¨èº«åŠ›é‡å’Œå°‘é‡æœ‰æ°§ï¼Œé˜²æ­¢ä½“é‡ç»§ç»­ä¸‹é™ã€‚é¥®é£Ÿä¸Šä¿è¯è¶³å¤Ÿç¢³æ°´å’Œè›‹ç™½ï¼Œç¡çœ å°½é‡å……è¶³ã€‚';
      planDetails = [
        'Day 1: èƒ¸ + ä¸‰å¤´ + 15 åˆ†é’Ÿè·‘æ­¥æœºå¿«èµ°',
        'Day 2: èƒŒ + äºŒå¤´ + æ ¸å¿ƒï¼ˆå¹³æ¿æ”¯æ’‘ã€æ­»è™«ç­‰ï¼‰',
        'Day 3: è…¿ + è‚© + 10â€“15 åˆ†é’Ÿä½å¼ºåº¦æœ‰æ°§'
      ];
    } else if (bmi < 25) {
      type = 'æ­£å¸¸èŒƒå›´';
      strategy = 'ç»¼åˆæå‡ (Recomp)';
      proteinRange = `${(w * 1.6).toFixed(0)} - ${(w * 2.2).toFixed(0)} g`;
      advice = 'åŠ›é‡å’Œæœ‰æ°§ç»“åˆï¼Œç›®æ ‡æ˜¯è®©å›´åº¦å’Œçº¿æ¡æ›´å¥½çœ‹ã€‚å¦‚æœæƒ³åå‘å‡è„‚ï¼Œç•¥å¾®æ§åˆ¶æ€»çƒ­é‡ï¼›å¦‚æœåå‘å¢è‚Œï¼Œé€‚å½“å¢åŠ æ‘„å…¥ã€‚';
      planDetails = [
        'Day 1: èƒ¸ + ä¸‰å¤´ + 20 åˆ†é’Ÿä¸­ç­‰å¼ºåº¦æœ‰æ°§',
        'Day 2: èƒŒ + äºŒå¤´ + æ ¸å¿ƒ',
        'Day 3: è…¿ + è‚© + 20 åˆ†é’Ÿæœ‰æ°§',
        'Day 4 (å¯é€‰): å…¨èº«å¤åˆåŠ¨ä½œ + è½»åº¦æœ‰æ°§'
      ];
    } else if (bmi < 30) {
      type = 'åé‡';
      strategy = 'å‡è„‚ä¼˜å…ˆ (Cut)';
      proteinRange = `${(w * 1.6).toFixed(0)} - ${(w * 2.0).toFixed(0)} g`; // åé‡äººç¾¤ç³»æ•°ç•¥ä½ä»¥é˜²æ€»çƒ­é‡è¿‡é«˜ï¼Œä½†ä»éœ€é«˜è›‹ç™½é¥±è…¹
      advice = 'ä»¥å‡è„‚ä¸ºä¸»ï¼ŒåŒæ—¶ä¿ç•™åŠ›é‡è®­ç»ƒï¼Œé¿å…â€œåªç˜¦ä½“é‡ä¸ç˜¦ä½“å‹â€ã€‚é¥®é£Ÿä¿æŒè½»å¾®çƒ­é‡ç¼ºå£ï¼Œæ§åˆ¶æ²¹ç‚¸å’Œé«˜ç³–ã€‚';
      planDetails = [
        'Day 1: ä¸Šè‚¢åŠ›é‡ï¼ˆèƒ¸/èƒŒ/æ‰‹è‡‚å¤åˆï¼‰+ 25â€“35 åˆ†é’Ÿæœ‰æ°§',
        'Day 2: ä¸‹è‚¢åŠ›é‡ï¼ˆè…¿ä¸¾ã€å¼“æ­¥ç­‰ï¼‰+ 20â€“30 åˆ†é’Ÿæœ‰æ°§',
        'Day 3: çº¯æœ‰æ°§ + æ ¸å¿ƒ (30â€“45 åˆ†é’Ÿ)',
        'Day 4: å…¨èº«å¾ªç¯å™¨æ¢°è®­ç»ƒ + 20 åˆ†é’Ÿæœ‰æ°§'
      ];
    } else {
      type = 'è‚¥èƒ–';
      strategy = 'å®‰å…¨å‡è„‚';
      proteinRange = `${(w * 1.2).toFixed(0)} - ${(w * 1.5).toFixed(0)} g`; // å¤§ä½“é‡äººç¾¤æŒ‰ä½“é‡ç®—è›‹ç™½å¯èƒ½è¿‡é«˜ï¼Œé€‚å½“é™ä½ç³»æ•°
      advice = 'ä½å†²å‡»æœ‰æ°§ + å™¨æ¢°åŠ›é‡ä¸ºä¸»ï¼Œå¾ªåºæ¸è¿›å‡è„‚ï¼Œå®‰å…¨æ€§ä¼˜å…ˆã€‚å¦‚æœ‰å…³èŠ‚é—®é¢˜ï¼Œè¯·é¿å…é«˜å†²å‡»è·³è·ƒã€‚';
      planDetails = [
        'Day 1: å…¨èº«å™¨æ¢°åŠ›é‡ + 15â€“20 åˆ†é’Ÿä½å†²å‡»æœ‰æ°§',
        'Day 2: å¿«èµ° / æ¤­åœ†æœº / å•è½¦ 30â€“45 åˆ†é’Ÿ',
        'Day 3: ä¼‘æ¯æˆ–è½»æ´»åŠ¨',
        'Day 4: å…¨èº«å™¨æ¢°åŠ›é‡ + 20â€“30 åˆ†é’Ÿæœ‰æ°§',
        'Day 5: ä¸­ç­‰å¼ºåº¦æœ‰æ°§ 30 åˆ†é’Ÿ'
      ];
    }

    setResult({ bmi, type, protein: proteinRange, advice, strategy, planDetails });
    setAiPlan(''); 
  };

  const generateAIPlan = async () => {
    if (!result) return;
    setIsGeneratingPlan(true);
    const prompt = `ç”¨æˆ·æ•°æ®: èº«é«˜${height}cm, ä½“é‡${weight}kg, BMI${result.bmi} (${result.type})ã€‚ç›®æ ‡: ${result.strategy}ã€‚è¯·ç”Ÿæˆ: 1.âœ¨ä»Šæ—¥è®­ç»ƒç»†èŠ‚(åŸºäºæˆ‘æ¨èçš„è®¡åˆ’æ¡†æ¶ï¼Œç»™å…·ä½“çš„åŠ¨ä½œç»„æ•°); 2.ğŸ¥—ä»Šæ—¥é¥®é£Ÿå»ºè®®(ä¸‰é¤ç®€è¿°)ã€‚ä¸­æ–‡,ç®€æ´,Emojié£æ ¼ã€‚`;
    const text = await callGemini(prompt);
    setAiPlan(text);
    setIsGeneratingPlan(false);
    setTimeout(() => planRef.current?.scrollIntoView({ behavior: 'smooth' }), 100);
  };

  return (
    <div className="p-4 md:p-8 max-w-3xl mx-auto pb-24 overflow-y-auto scroll-smooth">
      <div className="bg-gradient-to-br from-slate-900 to-slate-800 rounded-3xl p-8 text-white shadow-xl mb-6 relative overflow-hidden">
        <div className="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-blue-500 rounded-full opacity-20 blur-xl"></div>
        <h2 className="text-3xl font-bold mb-2 flex items-center relative z-10">
          <Calculator className="mr-3 w-8 h-8 text-blue-400" /> æ™ºèƒ½åˆ†æ
        </h2>
        <p className="opacity-80 relative z-10">åŸºäºèº«ä½“æ•°æ®ï¼Œå®šåˆ¶ç§‘å­¦çš„è®­ç»ƒä¸é¥®é£Ÿç­–ç•¥ã€‚</p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div className="bg-white/80 backdrop-blur-sm p-4 rounded-2xl shadow-sm border border-slate-100">
          <label className="block text-xs font-bold text-slate-400 uppercase mb-1">èº«é«˜ (CM)</label>
          <input 
            type="number" value={height} onChange={(e) => setHeight(e.target.value)}
            className="w-full text-xl font-bold bg-transparent focus:outline-none text-slate-800 placeholder-slate-300"
            placeholder="175"
          />
        </div>
        <div className="bg-white/80 backdrop-blur-sm p-4 rounded-2xl shadow-sm border border-slate-100">
          <label className="block text-xs font-bold text-slate-400 uppercase mb-1">ä½“é‡ (KG)</label>
          <input 
            type="number" value={weight} onChange={(e) => setWeight(e.target.value)}
            className="w-full text-xl font-bold bg-transparent focus:outline-none text-slate-800 placeholder-slate-300"
            placeholder="70"
          />
        </div>
        <button 
          onClick={calculate}
          className="bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-2xl shadow-lg shadow-blue-200 transition-all active:scale-95 flex items-center justify-center py-4 md:py-0"
        >
          ç”ŸæˆæŠ¥å‘Š <ChevronRight className="ml-1 w-5 h-5" />
        </button>
      </div>

      {result && (
        <div className="animate-fade-in space-y-6">
          {/* Results Cards */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 text-center">
              <div className="text-xs text-slate-400 mb-1">BMI</div>
              <div className="text-2xl font-black text-slate-800">{result.bmi}</div>
            </div>
            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 text-center">
              <div className="text-xs text-slate-400 mb-1">ä½“å‹</div>
              <div className={`text-lg font-bold ${result.type === 'æ­£å¸¸èŒƒå›´' ? 'text-green-600' : 'text-orange-500'}`}>{result.type}</div>
            </div>
            <div className="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 text-center col-span-2 md:col-span-2 flex flex-col justify-center">
              <div className="text-xs text-slate-400 mb-1">å»ºè®®è›‹ç™½è´¨/å¤©</div>
              <div className="text-2xl font-black text-purple-600">{result.protein}</div>
            </div>
          </div>

          {/* Strategy Card */}
          <div className="bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden">
            <div className="bg-slate-50 p-4 border-b border-slate-100 flex items-center">
              <Activity className="w-5 h-5 text-blue-500 mr-2" />
              <span className="font-bold text-slate-700">å½“å‰ç­–ç•¥: {result.strategy}</span>
            </div>
            <div className="p-6">
              <p className="text-slate-600 leading-relaxed mb-4 text-sm bg-slate-50 p-3 rounded-lg border border-slate-100">
                {result.advice}
              </p>

              <div className="mb-6">
                <h4 className="font-bold text-slate-800 mb-3 text-sm">æ¨èå‘¨è®¡åˆ’ç¤ºä¾‹ï¼š</h4>
                <ul className="space-y-2">
                  {result.planDetails.map((detail, idx) => (
                    <li key={idx} className="text-sm text-slate-600 flex items-start">
                      <div className="w-1.5 h-1.5 rounded-full bg-blue-400 mt-1.5 mr-2 shrink-0"></div>
                      {detail}
                    </li>
                  ))}
                </ul>
              </div>
              
              {!aiPlan ? (
                <button 
                  onClick={generateAIPlan}
                  disabled={isGeneratingPlan}
                  className="w-full py-4 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white rounded-xl font-bold shadow-lg shadow-purple-200 hover:shadow-xl transition-all flex items-center justify-center group"
                >
                  {isGeneratingPlan ? <Loader2 className="animate-spin mr-2" /> : <Sparkles className="mr-2 group-hover:rotate-12 transition-transform" />}
                  {isGeneratingPlan ? 'AI æ­£åœ¨æ€è€ƒä¸­...' : 'ç”Ÿæˆä»Šæ—¥è¯¦ç»† AI è®¡åˆ’'}
                </button>
              ) : (
                <div ref={planRef} className="bg-slate-50 rounded-xl p-5 border border-slate-100 animate-slide-up">
                  <div className="flex justify-between items-center mb-4">
                    <h3 className="font-bold text-slate-800 flex items-center"><Sparkles className="w-4 h-4 text-purple-500 mr-2"/> AI æ¨èæ–¹æ¡ˆ</h3>
                    <button onClick={generateAIPlan} className="text-xs text-slate-400 hover:text-blue-600">é‡æ–°ç”Ÿæˆ</button>
                  </div>
                  <div className="prose prose-sm max-w-none text-slate-600 whitespace-pre-line leading-7">
                    {aiPlan}
                  </div>
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// 2.2 åŠ¨ä½œåº“ç»„ä»¶ (Modernized & Responsive)
const ExerciseLibrary = () => {
  const [selectedCategory, setSelectedCategory] = useState('å…¨éƒ¨');
  const [selectedEquipment, setSelectedEquipment] = useState('å…¨éƒ¨');
  const [selectedExercise, setSelectedExercise] = useState(null);
  const [searchQuery, setSearchQuery] = useState('');

  // AI Chat State
  const [aiQuestion, setAiQuestion] = useState('');
  const [aiAnswer, setAiAnswer] = useState('');
  const [isAskingAi, setIsAskingAi] = useState(false);
  const chatEndRef = useRef(null);

  const filteredExercises = useMemo(() => {
    return EXERCISE_DATA.filter(ex => {
      const matchCat = selectedCategory === 'å…¨éƒ¨' || ex.category === selectedCategory;
      // å…¼å®¹æ–°çš„æ•°æ®ç±»å‹æ˜ å°„
      const matchEquip = selectedEquipment === 'å…¨éƒ¨' || ex.equipment.includes(selectedEquipment);
      const matchSearch = ex.name.toLowerCase().includes(searchQuery.toLowerCase());
      return matchCat && matchEquip && matchSearch;
    });
  }, [selectedCategory, selectedEquipment, searchQuery]);

  const handleAskAI = async () => {
    if (!aiQuestion.trim()) return;
    setIsAskingAi(true);
    setAiAnswer(''); 
    const prompt = `èƒŒæ™¯:ç”¨æˆ·æ­£åœ¨çœ‹åŠ¨ä½œâ€œ${selectedExercise.name}â€ã€‚æè¿°:${selectedExercise.description}ã€‚ç”¨æˆ·é—®:â€œ${aiQuestion}â€ã€‚è¯·åšä¸ºèµ„æ·±æ•™ç»ƒå›ç­”(ä¸­æ–‡,150å­—å†…,ä¸“ä¸šä¸”é¼“åŠ±)ã€‚`;
    const answer = await callGemini(prompt);
    setAiAnswer(answer);
    setIsAskingAi(false);
    setTimeout(() => chatEndRef.current?.scrollIntoView({ behavior: 'smooth' }), 100);
  };

  const closeExerciseModal = () => {
    setSelectedExercise(null);
    setAiQuestion('');
    setAiAnswer('');
    setIsAskingAi(false);
  };

  return (
    <div className="h-full flex flex-col bg-slate-50/50 relative">
      {/* Sticky Header with Glassmorphism */}
      <div className="sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm px-4 py-3">
        {/* Filters Row 1: Categories */}
        <div className="flex overflow-x-auto pb-2 mb-2 scrollbar-hide space-x-2 md:justify-center">
          {CATEGORIES.map(cat => (
            <button
              key={cat}
              onClick={() => setSelectedCategory(cat)}
              className={`whitespace-nowrap px-4 py-1.5 rounded-full text-sm font-medium transition-all active:scale-95 ${
                selectedCategory === cat 
                  ? 'bg-slate-800 text-white shadow-md shadow-slate-300' 
                  : 'bg-white text-slate-600 border border-slate-100 hover:bg-slate-50'
              }`}
            >
              {cat}
            </button>
          ))}
        </div>
        
        {/* Filters Row 2: Search & Equipment */}
        <div className="flex flex-col md:flex-row items-center gap-3 max-w-4xl mx-auto w-full">
           <div className="relative w-full md:w-48 shrink-0">
             <select 
              value={selectedEquipment}
              onChange={(e) => setSelectedEquipment(e.target.value)}
              className="w-full appearance-none bg-slate-100 border-0 text-slate-700 text-sm rounded-xl p-3 pr-8 focus:ring-2 focus:ring-blue-500 font-medium"
             >
               {EQUIPMENT_TYPES.map(eq => <option key={eq} value={eq}>{eq === 'å…¨éƒ¨' ? 'æ‰€æœ‰å™¨æ¢°' : eq}</option>)}
             </select>
             <ChevronDown className="absolute right-3 top-3.5 w-4 h-4 text-slate-400 pointer-events-none" />
           </div>
           <div className="relative flex-1 w-full">
             <input 
              type="text" 
              placeholder="æœç´¢åŠ¨ä½œï¼Œä¾‹å¦‚ï¼šæ·±è¹²ã€æˆ˜ç»³..." 
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full bg-slate-100 border-0 text-slate-700 text-sm rounded-xl p-3 pl-4 focus:ring-2 focus:ring-blue-500"
             />
           </div>
        </div>
      </div>

      {/* Responsive Grid for Exercises */}
      <div className="flex-1 overflow-y-auto p-4 md:p-6 pb-24 touch-pan-y" style={{ WebkitOverflowScrolling: 'touch' }}>
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 max-w-7xl mx-auto">
          {filteredExercises.length === 0 ? (
            <div className="col-span-full text-center py-20">
              <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <Filter className="w-8 h-8 text-slate-300" />
              </div>
              <p className="text-slate-400">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„åŠ¨ä½œ</p>
            </div>
          ) : (
            filteredExercises.map(exercise => (
              <div 
                key={exercise.id}
                onClick={() => setSelectedExercise(exercise)}
                className="group bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:shadow-xl hover:border-blue-100 hover:-translate-y-1 transition-all cursor-pointer flex flex-col justify-between h-full"
              >
                <div className="mb-4">
                  <div className="flex justify-between items-start mb-2">
                    <span className={`text-[10px] font-bold px-2 py-1 rounded-md uppercase tracking-wider ${
                      exercise.difficulty === 'ç®€å•' ? 'bg-green-50 text-green-600' : 
                      exercise.difficulty === 'ä¸­ç­‰' ? 'bg-yellow-50 text-yellow-600' : 
                      'bg-red-50 text-red-600'
                    }`}>
                      {exercise.difficulty}
                    </span>
                    <div className="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors">
                      <ChevronRight className="w-4 h-4 text-slate-400 group-hover:text-white" />
                    </div>
                  </div>
                  <h3 className="font-bold text-lg text-slate-800 mb-1 group-hover:text-blue-600 transition-colors">{exercise.name}</h3>
                  <p className="text-xs text-slate-500 line-clamp-2">{exercise.description}</p>
                </div>
                
                <div className="flex items-center gap-2 pt-4 border-t border-slate-50">
                  <span className="inline-flex items-center px-2.5 py-1 rounded-lg bg-slate-50 text-xs font-medium text-slate-600">
                    <Dumbbell className="w-3 h-3 mr-1.5 text-slate-400" /> 
                    {exercise.equipment}
                  </span>
                  <span className="text-slate-300 text-xs">|</span>
                  <span className="text-xs font-medium text-blue-600">
                    {exercise.category}
                  </span>
                </div>
              </div>
            ))
          )}
        </div>
      </div>

      {/* Modern Fullscreen Modal for Details */}
      {selectedExercise && (
        <div className="fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-6 bg-slate-900/40 backdrop-blur-sm transition-all" onClick={closeExerciseModal}>
          <div 
            className="bg-white w-full max-h-[90vh] md:h-auto md:max-h-[85vh] md:max-w-2xl md:rounded-3xl rounded-t-3xl shadow-2xl flex flex-col overflow-hidden animate-slide-up"
            onClick={e => e.stopPropagation()}
          >
            {/* Modal Header */}
            <div className="bg-gradient-to-r from-slate-900 to-slate-800 text-white p-6 md:p-8 relative shrink-0">
              <button onClick={closeExerciseModal} className="absolute right-6 top-6 p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors backdrop-blur-md">
                <X className="w-5 h-5" />
              </button>
              <h3 className="text-2xl md:text-3xl font-black mb-2">{selectedExercise.name}</h3>
              <div className="flex flex-wrap gap-2 text-sm opacity-90">
                <span className="px-3 py-1 bg-white/10 rounded-lg backdrop-blur-md">{selectedExercise.equipment}</span>
                <span className="px-3 py-1 bg-white/10 rounded-lg backdrop-blur-md text-blue-200">{selectedExercise.muscles.join(' & ')}</span>
              </div>
            </div>

            {/* Modal Body */}
            <div 
              className="flex-1 overflow-y-auto p-6 md:p-8 space-y-8 bg-white touch-pan-y" 
              style={{ WebkitOverflowScrolling: 'touch' }}
            >
              {/* Steps */}
              <div>
                <h4 className="font-bold text-slate-800 mb-4 flex items-center text-lg">
                  <CheckCircle className="w-5 h-5 mr-2 text-green-500" /> åŠ¨ä½œæ­¥éª¤
                </h4>
                <div className="space-y-4">
                  {selectedExercise.steps.map((step, idx) => (
                    <div key={idx} className="flex">
                      <div className="flex-shrink-0 w-6 h-6 rounded-full bg-slate-100 text-slate-500 text-xs font-bold flex items-center justify-center mt-0.5 mr-3 border border-slate-200">
                        {idx + 1}
                      </div>
                      <p className="text-slate-600 leading-relaxed">{step}</p>
                    </div>
                  ))}
                </div>
              </div>

              {/* Tips */}
              <div>
                <h4 className="font-bold text-slate-800 mb-4 flex items-center text-lg">
                  <AlertTriangle className="w-5 h-5 mr-2 text-amber-500" /> é¿å‘æŒ‡å—
                </h4>
                <div className="grid grid-cols-1 gap-3">
                  {selectedExercise.tips.map((tip, idx) => (
                    <div key={idx} className="bg-amber-50 p-4 rounded-xl border border-amber-100 flex items-start text-amber-800 text-sm leading-relaxed">
                      <Info className="w-4 h-4 mr-2 shrink-0 mt-0.5" />
                      {tip}
                    </div>
                  ))}
                </div>
              </div>

              {/* AI Coach */}
              <div className="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl p-5 md:p-6 border border-indigo-100 mb-safe-bottom">
                <h4 className="font-bold text-indigo-800 mb-2 flex items-center">
                  <Sparkles className="w-5 h-5 mr-2 text-indigo-600" /> AI éšèº«åŠ©æ•™
                </h4>
                <p className="text-sm text-indigo-600/80 mb-4">å¯¹åŠ¨ä½œæœ‰ç–‘é—®ï¼Ÿæ¯”å¦‚â€œè‚©è†€ç–¼â€ã€â€œæ²¡æœ‰å‘åŠ›æ„Ÿâ€ï¼Œéšæ—¶æé—®ã€‚</p>
                
                {aiAnswer && (
                  <div className="mb-4 bg-white p-4 rounded-xl text-slate-700 shadow-sm border border-indigo-50 animate-fade-in">
                    <div className="flex items-center mb-2 text-indigo-600 font-bold text-xs uppercase tracking-wider">
                      <MonitorSmartphone className="w-3 h-3 mr-1" /> IronPath AI
                    </div>
                    {aiAnswer}
                  </div>
                )}

                <div className="flex gap-2">
                  <input 
                    type="text" 
                    value={aiQuestion}
                    onChange={(e) => setAiQuestion(e.target.value)}
                    placeholder="è¾“å…¥ä½ çš„é—®é¢˜..."
                    className="flex-1 text-sm p-3 rounded-xl border border-indigo-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm"
                    onKeyDown={(e) => e.key === 'Enter' && handleAskAI()}
                  />
                  <button 
                    onClick={handleAskAI}
                    disabled={isAskingAi || !aiQuestion.trim()}
                    className="bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 disabled:opacity-50 transition-all shadow-md shadow-indigo-200"
                  >
                    {isAskingAi ? <Loader2 className="w-5 h-5 animate-spin" /> : <Send className="w-5 h-5" />}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

// 2.3 æ¬¢è¿é¡µ (Welcome View)
const WelcomeView = ({ onStart }) => (
  <div className="flex flex-col items-center justify-center h-full p-8 text-center bg-slate-900 text-white relative overflow-hidden">
    {/* Decorative Blobs */}
    <div className="absolute top-0 left-0 w-64 h-64 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -translate-x-1/2 -translate-y-1/2 animate-blob"></div>
    <div className="absolute bottom-0 right-0 w-64 h-64 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 translate-x-1/2 translate-y-1/2 animate-blob animation-delay-2000"></div>

    <div className="relative z-10 flex flex-col items-center">
      <div className="w-24 h-24 bg-gradient-to-tr from-blue-600 to-purple-600 rounded-3xl flex items-center justify-center mb-8 shadow-2xl shadow-blue-900/50 transform rotate-3 hover:rotate-6 transition-transform duration-500">
        <Flame className="w-12 h-12 text-white" />
      </div>
      <h1 className="text-4xl md:text-5xl font-black mb-3 tracking-tight">IronPath</h1>
      <h2 className="text-lg md:text-xl font-medium text-slate-400 mb-10 tracking-wide">é’¢é“ä¹‹è·¯ Â· æ™ºèƒ½å¥èº«æŒ‡å—</h2>
      <div className="flex items-center gap-2 text-slate-400 text-sm mb-10 bg-slate-800/50 px-4 py-2 rounded-full backdrop-blur-sm border border-slate-700">
        <BookOpen className="w-4 h-4" />
        <span>å·²æ”¶å½• 40+ ä¸“ä¸šå™¨æ¢°ä¸åŠ¨ä½œæŒ‡å—</span>
      </div>
      
      <div className="space-y-4 w-full max-w-xs">
        <button 
          onClick={onStart}
          className="w-full bg-white text-slate-900 font-bold py-4 px-8 rounded-2xl shadow-xl hover:scale-105 hover:shadow-2xl transition-all flex items-center justify-center group"
        >
          å¼€å§‹å˜å¼º <ChevronRight className="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" />
        </button>
        <p className="text-xs text-slate-500">v2.5 | ä¸“ä¸šçŸ¥è¯†åº“å·²æ›´æ–°</p>
      </div>
    </div>
  </div>
);

// --- 3. ä¸»åº”ç”¨ç»„ä»¶ Main App ---

const App = () => {
  const [activeTab, setActiveTab] = useState('welcome'); 

  if (activeTab === 'welcome') return <WelcomeView onStart={() => setActiveTab('library')} />;

  return (
    <div className="h-screen w-full bg-slate-100 flex flex-col font-sans overflow-hidden">
      {/* Main Layout Container - Responsive */}
      <div className="flex-1 flex overflow-hidden w-full max-w-[1600px] mx-auto bg-white md:shadow-2xl md:my-4 md:rounded-[2rem] border-slate-200 relative">
        
        {/* Desktop Sidebar Navigation (Visible only on large screens) */}
        <div className="hidden md:flex flex-col w-24 lg:w-64 bg-slate-900 text-white pt-8 shrink-0 z-30">
          <div className="flex items-center justify-center lg:justify-start lg:px-8 mb-10">
            <div className="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shrink-0 shadow-lg shadow-blue-900/50">
              <Flame className="w-6 h-6 text-white" />
            </div>
            <span className="hidden lg:block ml-3 font-bold text-xl tracking-tight">IronPath</span>
          </div>
          
          <div className="flex-1 space-y-2 px-4">
            <button 
              onClick={() => setActiveTab('library')}
              className={`w-full flex items-center p-3 rounded-xl transition-all ${activeTab === 'library' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}
            >
              <Dumbbell className="w-6 h-6 lg:mr-3" />
              <span className="hidden lg:block font-medium">åŠ¨ä½œåº“</span>
            </button>
            <button 
              onClick={() => setActiveTab('analysis')}
              className={`w-full flex items-center p-3 rounded-xl transition-all ${activeTab === 'analysis' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}
            >
              <Calculator className="w-6 h-6 lg:mr-3" />
              <span className="hidden lg:block font-medium">æ™ºèƒ½åˆ†æ</span>
            </button>
          </div>
          
          <div className="p-6 text-center lg:text-left text-xs text-slate-500">
            <span className="hidden lg:inline">Made for Gains ğŸ’ª</span>
          </div>
        </div>

        {/* Main Content Area */}
        <main className="flex-1 overflow-hidden relative bg-slate-50/50 flex flex-col w-full">
          {activeTab === 'library' && <ExerciseLibrary />}
          {activeTab === 'analysis' && <BodyAnalyzer />}
        </main>
      </div>

      {/* Mobile Bottom Navigation Bar (Hidden on desktop) */}
      <nav className="md:hidden bg-white/90 backdrop-blur-lg border-t border-slate-200 h-[calc(60px+env(safe-area-inset-bottom))] pb-[env(safe-area-inset-bottom)] flex items-center justify-around shrink-0 z-40 fixed bottom-0 w-full">
        <button 
          onClick={() => setActiveTab('library')}
          className={`flex flex-col items-center justify-center w-1/2 h-full transition-all ${activeTab === 'library' ? 'text-blue-600' : 'text-slate-400'}`}
        >
          <div className={`p-1.5 rounded-xl ${activeTab === 'library' ? 'bg-blue-50' : 'bg-transparent'}`}>
            <Dumbbell className={`w-6 h-6 ${activeTab === 'library' ? 'fill-current' : ''}`} />
          </div>
          <span className="text-[10px] font-medium mt-1">åŠ¨ä½œåº“</span>
        </button>
        
        <button 
          onClick={() => setActiveTab('analysis')}
          className={`flex flex-col items-center justify-center w-1/2 h-full transition-all ${activeTab === 'analysis' ? 'text-blue-600' : 'text-slate-400'}`}
        >
          <div className={`p-1.5 rounded-xl ${activeTab === 'analysis' ? 'bg-blue-50' : 'bg-transparent'}`}>
            <Activity className={`w-6 h-6 ${activeTab === 'analysis' ? 'fill-current' : ''}`} />
          </div>
          <span className="text-[10px] font-medium mt-1">æ™ºèƒ½åˆ†æ</span>
        </button>
      </nav>

      {/* Global Styles */}
      <style>{`
        @keyframes slide-up {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes blob {
          0% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
          100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-slide-up { animation: slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .mb-safe-bottom { margin-bottom: env(safe-area-inset-bottom); }
      `}</style>
    </div>
  );
};

export default App;
